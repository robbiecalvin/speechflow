<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>SpeechFlow | Voice-Activated Interactive Flow Builder</title>

<meta name="description" content="SpeechFlow is an interactive flow chart creator with voice recognition and activation. Build structured reasoning maps, argument trees, and visual logic systems directly in the browser." />
<meta name="author" content="Robbie Calvin" />
<meta name="robots" content="index, follow" />
<meta name="theme-color" content="#0e0e12" />

<!-- Canonical -->
<link rel="canonical" href="https://robbiecalvin.github.io/speechflow/" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="SpeechFlow" />
<meta property="og:title" content="SpeechFlow | Voice-Activated Flow Architecture Tool" />
<meta property="og:description" content="Create interactive flow charts and structured reasoning systems using visual nodes and voice control." />
<meta property="og:url" content="https://robbiecalvin.github.io/speechflow/" />
<meta property="og:image" content="https://robbiecalvin.github.io/speechflow/speechflow/assets/images/speechflowsocialshare.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="SpeechFlow | Interactive Voice Flow Builder" />
<meta name="twitter:description" content="Voice-enabled flow mapping for structured thinking, planning, and visual logic design." />
<meta name="twitter:image" content="https://robbiecalvin.github.io/speechflow/speechflow/assets/images/speechflowsocialshare.png" />

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "SpeechFlow",
  "url": "https://robbiecalvin.github.io/speechflow/",
  "applicationCategory": "ProductivityApplication",
  "operatingSystem": "Web",
  "description": "SpeechFlow is a browser-based interactive flow chart creator with voice recognition and activation for structured reasoning and visual logic mapping.",
  "creator": {
    "@type": "Person",
    "name": "Robbie Calvin"
  }
}
</script>

<!-- Performance Hints -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div id="floatingMapName">Untitled Map</div>

  <div id="sidebar">
    <img id="logoFull" class="logo logo-full" src="./assets/images/SpeechFlow.png" alt="SpeechFlow Logo">
    <img id="logoCompact" class="logo logo-compact hidden" src="./assets/images/spflowlogosmall.png" onerror="this.onerror=null;this.src='./assets/images/SpeechFlow.png';" alt="SpeechFlow Compact Logo">
    <div id="sidebarHeader">
      <button id="newMapBtn" type="button" title="Create New Map"><span class="btn-icon">+</span></button>
      <button id="mapHistoryBtn" type="button" title="Map History"><span class="btn-icon">üïò</span></button>
      <button id="exportMapIconBtn" type="button" title="Export Map"><span class="btn-icon">‚¨á</span></button>
      <button id="importMapIconBtn" type="button" title="Import Map"><span class="btn-icon">‚¨Ü</span></button>
      <button id="toggleBubbleColumn" type="button" title="Toggle Bubble List"><span class="btn-icon">‚óÇ</span></button>
    </div>

    <div id="sidebarColumns" class="expanded">
      <div id="controlPanel">
        <button id="lockToggle"><span class="btn-icon">üîí</span><span class="btn-label">Lock/Unlock</span></button>
        <button id="deleteBubble"><span class="btn-icon">üóëÔ∏è</span><span class="btn-label">Delete</span></button>
        <button id="quickConnect"><span class="btn-icon">üîó</span><span class="btn-label">Connect</span></button>
        <button id="snapCenter"><span class="btn-icon">üéØ</span><span class="btn-label">Snap to Center</span></button>
        <button id="exportImageBtn"><span class="btn-icon">üì∏</span><span class="btn-label">Export Image</span></button>
        <button id="addBubbleBtn"><span class="btn-icon">‚ûï</span><span class="btn-label">Add Bubble</span></button>
        <button id="clearMap"><span class="btn-icon">üßπ</span><span class="btn-label">Clear Map</span></button>
        <input type="file" id="importMap" style="display:none" accept=".json">
        <button id="generateFromPrompt"><span class="btn-icon">üß†</span><span class="btn-label">Create from Prompt</span></button>
      </div>

      <div id="bubbleColumn">
        <h3>Bubbles</h3>
        <ul id="bubbleList"></ul>
      </div>
    </div>

    <div id="audioControlsBar">
      <div class="status"><span class="status-icon">üéôÔ∏è</span><span class="status-label">Listening...</span></div>
      <div id="voiceErrorMessage" class="voice-error hidden" aria-live="polite"></div>
      <div id="voiceTranscriptPanel" class="voice-transcript">
        <span class="voice-transcript-label">Transcript</span>
        <span id="voiceTranscriptText" class="voice-transcript-text">No voice input yet.</span>
      </div>
      <div id="voiceModeHint" class="voice-hint">Voice mode: always listening.</div>
      <button id="voiceSettingsBtn" type="button"><span class="btn-icon">üéõÔ∏è</span><span class="btn-label">Voice Settings</span></button>
      <div id="audioExpandedControls">
        <button id="audioPlayStopToggle" type="button"><span class="btn-icon">‚ñ∂Ô∏è</span><span class="btn-label">Play</span></button>
        <button id="audioPauseResumeToggle" type="button" disabled><span class="btn-icon">‚è∏</span><span class="btn-label">Pause</span></button>
      </div>
      <button id="audioSingleToggle" type="button" class="hidden"><span class="btn-icon">‚ñ∂Ô∏è</span><span class="btn-label">Play / Pause / Resume / Stop</span></button>
    </div>
  </div>

  <canvas id="connections"></canvas>
  <canvas id="clickLayer" style="position:absolute;top:0;left:0;z-index:2"></canvas>

  <div id="bubbleEditorModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="bubbleEditorTitle">
      <h3 id="bubbleEditorTitle">Bubble Actions</h3>
      <p id="bubbleEditorMeta"></p>

      <div class="modal-actions">
        <button type="button" data-modal-action="edit">Edit Text</button>
        <button type="button" data-modal-action="type">Change Type</button>
        <button type="button" data-modal-action="order">Set Playback Order</button>
        <button type="button" data-modal-action="delete">Delete Bubble</button>
      </div>

      <div id="bubbleEditorInputArea" class="hidden">
        <label id="bubbleEditorInputLabel" for="bubbleEditorTextInput"></label>
        <input id="bubbleEditorTextInput" type="text" class="hidden">
        <select id="bubbleEditorTypeSelect" class="hidden">
          <option value="idea">Idea</option>
          <option value="task">Task</option>
          <option value="question">Question</option>
          <option value="blocker">Blocker</option>
          <option value="note">Note</option>
        </select>
        <input id="bubbleEditorOrderInput" type="number" min="1" step="1" class="hidden">
      </div>

      <p id="bubbleEditorError" class="modal-error hidden"></p>

      <div class="modal-footer">
        <button id="bubbleEditorApply" type="button" class="hidden">Apply</button>
        <button id="bubbleEditorClose" type="button">Close</button>
      </div>
    </div>
  </div>

  <div id="mapSetupModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="mapSetupTitle">
      <h3 id="mapSetupTitle">Create New Map</h3>
      <p class="modal-subtitle">Name your map and set bubble type labels.</p>

      <label for="mapNameInput">Map Name</label>
      <input id="mapNameInput" type="text" placeholder="Map Name">

      <div id="mapTypeInputs">
        <input id="bubbleTypeIdea" class="bubble-type-input type-idea" type="text" placeholder="Bubble Type">
        <input id="bubbleTypeTask" class="bubble-type-input type-task" type="text" placeholder="Bubble Type">
        <input id="bubbleTypeQuestion" class="bubble-type-input type-question" type="text" placeholder="Bubble Type">
        <input id="bubbleTypeBlocker" class="bubble-type-input type-blocker" type="text" placeholder="Bubble Type">
        <input id="bubbleTypeNote" class="bubble-type-input type-note" type="text" placeholder="Bubble Type">
      </div>

      <p id="mapSetupError" class="modal-error hidden"></p>

      <div class="modal-footer">
        <button id="saveBubbleTypes" type="button">Save Bubble Types</button>
        <button id="closeMapSetup" type="button">Cancel</button>
      </div>
    </div>
  </div>

  <div id="mapHistoryModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="mapHistoryTitle">
      <h3 id="mapHistoryTitle">Map History</h3>
      <p class="modal-subtitle">Load a previous map from local storage.</p>
      <div id="mapHistoryList"></div>
      <div class="modal-footer">
        <button id="closeMapHistory" type="button">Close</button>
      </div>
    </div>
  </div>

  <div id="promptModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="promptModalTitle">
      <h3 id="promptModalTitle">Create From Prompt</h3>
      <p class="modal-subtitle">Enter a topic to generate a mini map.</p>
      <input id="promptModalInput" type="text" placeholder="Type an idea...">
      <p id="promptModalError" class="modal-error hidden"></p>
      <div class="modal-footer">
        <button id="promptModalCreate" type="button">Create</button>
        <button id="promptModalCancel" type="button">Cancel</button>
      </div>
    </div>
  </div>

  <div id="voiceSettingsModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="voiceSettingsTitle">
      <h3 id="voiceSettingsTitle">Voice Settings</h3>
      <p class="modal-subtitle">Configure recognition, routing, and playback behavior.</p>

      <label for="voiceLanguageInput">Recognition Language</label>
      <input id="voiceLanguageInput" type="text" value="en-US" placeholder="en-US">

      <label class="voice-setting-checkbox"><input id="voiceAutoRestartInput" type="checkbox" checked> Auto-restart recognition</label>
      <label class="voice-setting-checkbox"><input id="voiceWakePhraseEnabledInput" type="checkbox"> Enable wake phrase</label>

      <label for="voiceWakePhraseInput">Wake Phrase</label>
      <input id="voiceWakePhraseInput" type="text" value="speechflow" placeholder="speechflow">

      <label class="voice-setting-checkbox"><input id="voicePushToTalkInput" type="checkbox"> Push-to-talk (hold Space)</label>

      <label for="voiceConfidenceThresholdInput">Confidence Threshold (0.0 - 1.0)</label>
      <input id="voiceConfidenceThresholdInput" type="number" min="0" max="1" step="0.05" value="0">

      <label for="voicePlaybackRateInput">Playback Rate (0.5 - 2.0)</label>
      <input id="voicePlaybackRateInput" type="number" min="0.5" max="2" step="0.1" value="1">

      <label for="voicePlaybackPitchInput">Playback Pitch (0.5 - 2.0)</label>
      <input id="voicePlaybackPitchInput" type="number" min="0.5" max="2" step="0.1" value="1">

      <label for="voicePlaybackVoiceInput">Playback Voice</label>
      <select id="voicePlaybackVoiceInput">
        <option value="">System Default</option>
      </select>

      <p id="voiceSettingsError" class="modal-error hidden"></p>

      <div class="modal-footer">
        <button id="voiceSettingsSave" type="button">Save</button>
        <button id="voiceSettingsCancel" type="button">Cancel</button>
      </div>
    </div>
  </div>

  <script src="./core/state.js"></script>
  <script src="./core/camera.js"></script>
  <script src="./core/node.js"></script>
  <script src="./core/edge.js"></script>
  <script src="./core/playback.js"></script>
  <script src="./core/ui.js"></script>
  <script src="./core/persistence.js"></script>
  <script src="./core/speech.js"></script>
  <script src="./core/graph.js"></script>
  <script src="./core/layout.js"></script>
  <script src="./core/voice-state.js"></script>
  <script src="./core/voice-errors.js"></script>
  <script src="./core/voice-parser.js"></script>
  <script src="./core/voice-router.js"></script>
  <script src="./core/voice-recognition.js"></script>
  <script src="./core/voice-settings.js"></script>
  <script src="./script.js"></script>
</body>
</html>
